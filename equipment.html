<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Equipment Inventory | GearGuard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        --bg: #f8f6f4;
        --mint: #d2e9e9;
      }
      body {
        background-color: var(--bg);
        font-family: "Segoe UI", sans-serif;
      }
    </style>
  </head>
  <body class="p-6">
    <div class="card overflow-hidden">
      <div class="p-4 border-b flex justify-between items-center">
        <div class="flex items-center space-x-4">
          <button onclick="toggleModal('eqModal', true)" class="btn-new">
            New
          </button>
          <h1 class="text-xl font-semibold">Equipment</h1>
        </div>
      </div>

      <div class="overflow-x-auto">
        <table class="w-full text-left" id="eqTable">
          <thead class="bg-gray-50 border-b text-xs uppercase text-gray-500">
            <tr>
              <th class="p-4">Equipment Name</th>
              <th class="p-4">Employee</th>
              <th class="p-4">Department</th>
              <th class="p-4">Serial Number</th>
              <th class="p-4">Technician</th>
              <th class="p-4">Category</th>
              <th class="p-4">Company</th>
            </tr>
          </thead>
          <tbody class="text-sm divide-y"></tbody>
        </table>
      </div>
    </div>

    <div
      id="eqModal"
      class="modal-backdrop hidden fixed inset-0 bg-black/50 z-50 items-center justify-center p-4"
    >
      <div class="bg-white w-full max-w-2xl rounded-lg shadow-xl">
        <div class="p-4 bg-light-mint font-bold border-b">
          Register New Equipment
        </div>

        <form id="eqForm" class="p-6 grid grid-cols-2 gap-4">
          <div class="col-span-2">
            <label class="block text-xs font-bold uppercase mb-1"
              >Equipment Name</label
            >
            <input
              type="text"
              id="eq_name"
              class="form-input w-full"
              required
            />
          </div>

          <div>
            <label class="block text-xs font-bold uppercase mb-1"
              >Employee Name</label
            >
            <input type="text" id="eq_emp" class="form-input w-full" required />
          </div>
          <div>
            <label class="block text-xs font-bold uppercase mb-1"
              >Department</label
            >
            <input
              type="text"
              id="eq_dept"
              class="form-input w-full"
              required
            />
          </div>

          <div>
            <label class="block text-xs font-bold uppercase mb-1"
              >Serial Number</label
            >
            <input
              type="text"
              id="eq_serial"
              class="form-input w-full"
              required
            />
          </div>
          <div>
            <label class="block text-xs font-bold uppercase mb-1"
              >Technician</label
            >
            <input
              type="text"
              id="eq_tech"
              class="form-input w-full"
              required
            />
          </div>

          <div>
            <label class="block text-xs font-bold uppercase mb-1"
              >Category</label
            >
            <select id="eq_cat" class="form-input w-full" required>
              <option value="" disabled selected>Select Category</option>
              <option value="Monitors">Monitors</option>
              <option value="Laptops">Laptops</option>
              <option value="Printers">Printers</option>
            </select>
          </div>

          <div>
            <label class="block text-xs font-bold uppercase mb-1"
              >Company</label
            >
            <input
              type="text"
              id="eq_comp"
              class="form-input w-full"
              required
            />
          </div>

          <div class="col-span-2 flex justify-end space-x-3 pt-4 border-t mt-2">
            <button
              type="button"
              onclick="toggleModal('eqModal', false)"
              class="text-gray-500 font-semibold"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="bg-black px-8 py-2 rounded font-bold text-white hover:opacity-90"
            >
              Save Equipment
            </button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // Toggle Modal Visibility
      function toggleModal(id, show) {
        const modal = document.getElementById(id);
        if (show) {
          modal.classList.remove("hidden");
          modal.classList.add("flex");
        } else {
          modal.classList.add("hidden");
          modal.classList.remove("flex");
        }
      }

      // Handle Form Submission and Dynamic Table Row Creation
      document
        .getElementById("eqForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const fields = [
            "eq_name",
            "eq_emp",
            "eq_dept",
            "eq_serial",
            "eq_tech",
            "eq_cat",
            "eq_comp",
          ];

          // Map values from the inputs
          const data = fields.map((id) => document.getElementById(id).value);

          // Build the HTML Row
          const row = `
            <tr class="hover:bg-gray-50 transition-colors">
                <td class="p-4 font-medium text-gray-800">${data[0]}</td>
                <td class="p-4 text-gray-700">${data[1]}</td>
                <td class="p-4 text-gray-700">${data[2]}</td>
                <td class="p-4 text-gray-500 font-mono">${data[3]}</td>
                <td class="p-4 text-gray-700">${data[4]}</td>
                <td class="p-4 text-gray-700">
                    <span class="px-2 py-1 bg-blue-50 text-blue-600 rounded text-xs font-semibold">
                        ${data[5]}
                    </span>
                </td>
                <td class="p-4 text-gray-700">${data[6]}</td>
            </tr>`;

          // Append to table body
          document
            .querySelector("#eqTable tbody")
            .insertAdjacentHTML("beforeend", row);

          // Reset and close
          this.reset();
          toggleModal("eqModal", false);
        });
    </script>
  </body>
</html>
